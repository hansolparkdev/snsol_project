{"ast":null,"code":"import { takeEvery, put, call } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { FETCH_CARDS_START, FETCH_CARDS_START_STARTED, FETCH_CARDS_SUCCESS_STARTED, FETCH_CARDS_FAIL_STARTED, LIKE_CARD_REQUEST, UNLIKE_CARD_REQUEST, ADD_CARD_REPLY_REQUEST, DEL_CARD_REPLY_REQUEST, LIKE_CARD_SUCCESS, LIKE_CARDS_FAIL, UNLIKE_CARD_SUCCESS, UNLIKE_CARDS_FAIL, ADD_CARD_REPLY_SUCCESS, ADD_CARD_REPLY_FAIL, DEL_CARD_REPLY_SUCCESS, DEL_CARD_REPLY_FAIL } from '../reducers/cardReducer'; // import { SAGA_SIGN_IN } from '../reducers/sagaLoginReducer';\n\nconst fetchCard = function* fetchFollowing(action) {\n  try {\n    yield put({\n      type: FETCH_CARDS_START_STARTED\n    });\n    const {\n      data\n    } = yield call([axios, 'get'], `http://127.0.0.1:3001/cards?userId=${action.payload}`, {\n      withCredentials: true\n    });\n    yield put({\n      type: FETCH_CARDS_SUCCESS_STARTED,\n      payload: data\n    });\n  } catch (e) {\n    yield put({\n      type: FETCH_CARDS_FAIL_STARTED\n    });\n  }\n};\n\nconst likeCard = function* LikeCard(action) {\n  try {\n    const likeData = {\n      boardId: action.payload.board_id,\n      userId: action.payload.username\n    }; // console.log(likeData);\n\n    const {\n      data\n    } = yield call([axios, 'post'], 'http://127.0.0.1:3001/insertLike', likeData, {\n      withCredentials: true\n    }); // console.log(data);\n\n    yield put({\n      type: LIKE_CARD_SUCCESS,\n      payload: data\n    });\n  } catch (e) {\n    yield put({\n      type: LIKE_CARDS_FAIL\n    });\n  }\n};\n\nconst unLikeCard = function* LikeCard(action) {\n  try {\n    const unlikeData = {\n      // index: action.payload.index,\n      boardId: action.payload.board_id,\n      userId: action.payload.username\n    }; // console.log(unlikeData);\n\n    const {\n      data\n    } = yield call([axios, 'post'], 'http://127.0.0.1:3001/deleteLike', unlikeData, {\n      withCredentials: true\n    });\n\n    if (data === true) {\n      yield put({\n        type: UNLIKE_CARD_SUCCESS,\n        payload: unlikeData\n      });\n    }\n  } catch (e) {\n    yield put({\n      type: UNLIKE_CARDS_FAIL\n    });\n  }\n};\n\nconst addReply = function* addReply(action) {\n  try {\n    console.log('aaa');\n    const addReplyData = {\n      // index: action.payload.index,\n      boardId: action.payload.board_id,\n      userId: action.payload.username,\n      desc: action.payload.desc\n    };\n    const {\n      data\n    } = yield call([axios, 'post'], 'http://127.0.0.1:3001/addReply', addReplyData, {\n      withCredentials: true\n    });\n    console.log(data);\n    yield put({\n      type: ADD_CARD_REPLY_SUCCESS\n    });\n  } catch (e) {\n    yield put({\n      type: ADD_CARD_REPLY_FAIL\n    });\n  }\n};\n\nexport const watchFetchCard = function* watchFetchCard() {\n  yield takeEvery(FETCH_CARDS_START, fetchCard);\n};\nexport const watchLikeCard = function* watchLikeCard() {\n  yield takeEvery(LIKE_CARD_REQUEST, likeCard);\n};\nexport const watchUnLikeCard = function* watchUnLikeCard() {\n  yield takeEvery(UNLIKE_CARD_REQUEST, unLikeCard);\n};\nexport const watchAddReply = function* watchAddReply() {\n  yield takeEvery(ADD_CARD_REPLY_REQUEST, addReply);\n};","map":{"version":3,"sources":["D:/Desktop/snsol_project/frontend/redux/sagas/card.js"],"names":["takeEvery","put","call","axios","FETCH_CARDS_START","FETCH_CARDS_START_STARTED","FETCH_CARDS_SUCCESS_STARTED","FETCH_CARDS_FAIL_STARTED","LIKE_CARD_REQUEST","UNLIKE_CARD_REQUEST","ADD_CARD_REPLY_REQUEST","DEL_CARD_REPLY_REQUEST","LIKE_CARD_SUCCESS","LIKE_CARDS_FAIL","UNLIKE_CARD_SUCCESS","UNLIKE_CARDS_FAIL","ADD_CARD_REPLY_SUCCESS","ADD_CARD_REPLY_FAIL","DEL_CARD_REPLY_SUCCESS","DEL_CARD_REPLY_FAIL","fetchCard","fetchFollowing","action","type","data","payload","withCredentials","e","likeCard","LikeCard","likeData","boardId","board_id","userId","username","unLikeCard","unlikeData","addReply","console","log","addReplyData","desc","watchFetchCard","watchLikeCard","watchUnLikeCard","watchAddReply"],"mappings":"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","sourcesContent":["import { takeEvery, put, call } from 'redux-saga/effects';\r\nimport axios from 'axios';\r\nimport {\r\n  FETCH_CARDS_START, FETCH_CARDS_START_STARTED,\r\n  FETCH_CARDS_SUCCESS_STARTED, FETCH_CARDS_FAIL_STARTED,\r\n  LIKE_CARD_REQUEST, UNLIKE_CARD_REQUEST, ADD_CARD_REPLY_REQUEST, DEL_CARD_REPLY_REQUEST,\r\n  LIKE_CARD_SUCCESS, LIKE_CARDS_FAIL,\r\n  UNLIKE_CARD_SUCCESS, UNLIKE_CARDS_FAIL,\r\n  ADD_CARD_REPLY_SUCCESS, ADD_CARD_REPLY_FAIL,\r\n  DEL_CARD_REPLY_SUCCESS, DEL_CARD_REPLY_FAIL,\r\n} from '../reducers/cardReducer';\r\n// import { SAGA_SIGN_IN } from '../reducers/sagaLoginReducer';\r\n\r\nconst fetchCard = function* fetchFollowing(action) {\r\n  try {\r\n    yield put({ type: FETCH_CARDS_START_STARTED });\r\n    const { data } = yield call([axios, 'get'], `http://127.0.0.1:3001/cards?userId=${action.payload}`, {\r\n      withCredentials: true,\r\n    });\r\n    yield put({ type: FETCH_CARDS_SUCCESS_STARTED, payload: data });\r\n  } catch (e) {\r\n    yield put({ type: FETCH_CARDS_FAIL_STARTED });\r\n  }\r\n};\r\nconst likeCard = function* LikeCard(action) {\r\n  try {\r\n    const likeData = {\r\n      boardId: action.payload.board_id,\r\n      userId: action.payload.username,\r\n    };\r\n    // console.log(likeData);\r\n    const { data } = yield call([axios, 'post'], 'http://127.0.0.1:3001/insertLike', likeData, {\r\n      withCredentials: true,\r\n    });\r\n    // console.log(data);\r\n    yield put({ type: LIKE_CARD_SUCCESS, payload: data });\r\n  } catch (e) {\r\n    yield put({ type: LIKE_CARDS_FAIL });\r\n  }\r\n};\r\n\r\nconst unLikeCard = function* LikeCard(action) {\r\n  try {\r\n    const unlikeData = {\r\n      // index: action.payload.index,\r\n      boardId: action.payload.board_id,\r\n      userId: action.payload.username,\r\n    };\r\n    // console.log(unlikeData);\r\n    const { data } = yield call([axios, 'post'], 'http://127.0.0.1:3001/deleteLike', unlikeData, {\r\n      withCredentials: true,\r\n    });\r\n    if (data === true) {\r\n      yield put({ type: UNLIKE_CARD_SUCCESS, payload: unlikeData });\r\n    }\r\n  } catch (e) {\r\n    yield put({ type: UNLIKE_CARDS_FAIL });\r\n  }\r\n};\r\nconst addReply = function* addReply(action) {\r\n  try {\r\n    console.log('aaa');\r\n    const addReplyData = {\r\n      // index: action.payload.index,\r\n      boardId: action.payload.board_id,\r\n      userId: action.payload.username,\r\n      desc: action.payload.desc,\r\n    };\r\n    const { data } = yield call([axios, 'post'], 'http://127.0.0.1:3001/addReply', addReplyData, {\r\n      withCredentials: true,\r\n    });\r\n    console.log(data);\r\n    yield put({ type: ADD_CARD_REPLY_SUCCESS });\r\n  } catch (e) {\r\n    yield put({ type: ADD_CARD_REPLY_FAIL });\r\n  }\r\n};\r\n\r\nexport const watchFetchCard = function* watchFetchCard() {\r\n  yield takeEvery(FETCH_CARDS_START, fetchCard);\r\n};\r\nexport const watchLikeCard = function* watchLikeCard() {\r\n  yield takeEvery(LIKE_CARD_REQUEST, likeCard);\r\n};\r\nexport const watchUnLikeCard = function* watchUnLikeCard() {\r\n  yield takeEvery(UNLIKE_CARD_REQUEST, unLikeCard);\r\n};\r\nexport const watchAddReply = function* watchAddReply() {\r\n  yield takeEvery(ADD_CARD_REPLY_REQUEST, addReply);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}