{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport { takeEvery, put, call } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { FETCH_CARDS_START, FETCH_CARDS_START_STARTED, FETCH_CARDS_SUCCESS_STARTED, FETCH_CARDS_FAIL_STARTED, LIKE_CARD_REQUEST, UNLIKE_CARD_REQUEST, ADD_CARD_REPLY_REQUEST, DEL_CARD_REPLY_REQUEST, LIKE_CARD_SUCCESS, LIKE_CARDS_FAIL, UNLIKE_CARD_SUCCESS, UNLIKE_CARDS_FAIL, ADD_CARD_REPLY_SUCCESS, ADD_CARD_REPLY_FAIL, DEL_CARD_REPLY_SUCCESS, DEL_CARD_REPLY_FAIL } from '../reducers/cardReducer'; // import { SAGA_SIGN_IN } from '../reducers/sagaLoginReducer';\n\nvar fetchCard = /*#__PURE__*/_regeneratorRuntime.mark(function fetchFollowing(action) {\n  var _ref, data;\n\n  return _regeneratorRuntime.wrap(function fetchFollowing$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return put({\n            type: FETCH_CARDS_START_STARTED\n          });\n\n        case 3:\n          _context.next = 5;\n          return call([axios, 'get'], \"http://127.0.0.1:3001/cards?userId=\".concat(action.payload), {\n            withCredentials: true\n          });\n\n        case 5:\n          _ref = _context.sent;\n          data = _ref.data;\n          _context.next = 9;\n          return put({\n            type: FETCH_CARDS_SUCCESS_STARTED,\n            payload: data\n          });\n\n        case 9:\n          _context.next = 15;\n          break;\n\n        case 11:\n          _context.prev = 11;\n          _context.t0 = _context[\"catch\"](0);\n          _context.next = 15;\n          return put({\n            type: FETCH_CARDS_FAIL_STARTED\n          });\n\n        case 15:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, fetchFollowing, null, [[0, 11]]);\n});\n\nvar likeCard = /*#__PURE__*/_regeneratorRuntime.mark(function LikeCard(action) {\n  var likeData, _ref2, data;\n\n  return _regeneratorRuntime.wrap(function LikeCard$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          likeData = {\n            boardId: action.payload.board_id,\n            userId: action.payload.username\n          }; // console.log(likeData);\n\n          _context2.next = 4;\n          return call([axios, 'post'], 'http://127.0.0.1:3001/insertLike', likeData, {\n            withCredentials: true\n          });\n\n        case 4:\n          _ref2 = _context2.sent;\n          data = _ref2.data;\n          _context2.next = 8;\n          return put({\n            type: LIKE_CARD_SUCCESS,\n            payload: data\n          });\n\n        case 8:\n          _context2.next = 14;\n          break;\n\n        case 10:\n          _context2.prev = 10;\n          _context2.t0 = _context2[\"catch\"](0);\n          _context2.next = 14;\n          return put({\n            type: LIKE_CARDS_FAIL\n          });\n\n        case 14:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, LikeCard, null, [[0, 10]]);\n});\n\nvar unLikeCard = /*#__PURE__*/_regeneratorRuntime.mark(function LikeCard(action) {\n  var unlikeData, _ref3, data;\n\n  return _regeneratorRuntime.wrap(function LikeCard$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          unlikeData = {\n            // index: action.payload.index,\n            boardId: action.payload.board_id,\n            userId: action.payload.username\n          }; // console.log(unlikeData);\n\n          _context3.next = 4;\n          return call([axios, 'post'], 'http://127.0.0.1:3001/deleteLike', unlikeData, {\n            withCredentials: true\n          });\n\n        case 4:\n          _ref3 = _context3.sent;\n          data = _ref3.data;\n\n          if (!(data === true)) {\n            _context3.next = 9;\n            break;\n          }\n\n          _context3.next = 9;\n          return put({\n            type: UNLIKE_CARD_SUCCESS,\n            payload: unlikeData\n          });\n\n        case 9:\n          _context3.next = 15;\n          break;\n\n        case 11:\n          _context3.prev = 11;\n          _context3.t0 = _context3[\"catch\"](0);\n          _context3.next = 15;\n          return put({\n            type: UNLIKE_CARDS_FAIL\n          });\n\n        case 15:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, LikeCard, null, [[0, 11]]);\n});\n\nvar addReply = /*#__PURE__*/_regeneratorRuntime.mark(function addReply(action) {\n  var addReplyData, _ref4, data;\n\n  return _regeneratorRuntime.wrap(function addReply$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          addReplyData = {\n            // index: action.payload.index,\n            boardId: action.payload.board_id,\n            userId: action.payload.username,\n            desc: action.payload.desc\n          };\n          _context4.next = 4;\n          return call([axios, 'post'], 'http://127.0.0.1:3001/addReply', addReplyData, {\n            withCredentials: true\n          });\n\n        case 4:\n          _ref4 = _context4.sent;\n          data = _ref4.data;\n          console.log(data); // yield put({ type: ADD_CARD_REPLY_SUCCESS });\n\n          _context4.next = 11;\n          break;\n\n        case 9:\n          _context4.prev = 9;\n          _context4.t0 = _context4[\"catch\"](0);\n\n        case 11:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, addReply, null, [[0, 9]]);\n});\n\nexport var watchFetchCard = /*#__PURE__*/_regeneratorRuntime.mark(function watchFetchCard() {\n  return _regeneratorRuntime.wrap(function watchFetchCard$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return takeEvery(FETCH_CARDS_START, fetchCard);\n\n        case 2:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, watchFetchCard);\n});\nexport var watchLikeCard = /*#__PURE__*/_regeneratorRuntime.mark(function watchLikeCard() {\n  return _regeneratorRuntime.wrap(function watchLikeCard$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return takeEvery(LIKE_CARD_REQUEST, likeCard);\n\n        case 2:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, watchLikeCard);\n});\nexport var watchUnLikeCard = /*#__PURE__*/_regeneratorRuntime.mark(function watchUnLikeCard() {\n  return _regeneratorRuntime.wrap(function watchUnLikeCard$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return takeEvery(UNLIKE_CARD_REQUEST, unLikeCard);\n\n        case 2:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, watchUnLikeCard);\n});\nexport var watchAddReply = /*#__PURE__*/_regeneratorRuntime.mark(function watchAddReply() {\n  return _regeneratorRuntime.wrap(function watchAddReply$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.next = 2;\n          return takeEvery(ADD_CARD_REPLY_REQUEST, addReply);\n\n        case 2:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, watchAddReply);\n});","map":{"version":3,"sources":["D:/Desktop/snsol_project/frontend/redux/sagas/card.js"],"names":["takeEvery","put","call","axios","FETCH_CARDS_START","FETCH_CARDS_START_STARTED","FETCH_CARDS_SUCCESS_STARTED","FETCH_CARDS_FAIL_STARTED","LIKE_CARD_REQUEST","UNLIKE_CARD_REQUEST","ADD_CARD_REPLY_REQUEST","DEL_CARD_REPLY_REQUEST","LIKE_CARD_SUCCESS","LIKE_CARDS_FAIL","UNLIKE_CARD_SUCCESS","UNLIKE_CARDS_FAIL","ADD_CARD_REPLY_SUCCESS","ADD_CARD_REPLY_FAIL","DEL_CARD_REPLY_SUCCESS","DEL_CARD_REPLY_FAIL","fetchCard","fetchFollowing","action","type","payload","withCredentials","data","likeCard","LikeCard","likeData","boardId","board_id","userId","username","unLikeCard","unlikeData","addReply","addReplyData","desc","console","log","watchFetchCard","watchLikeCard","watchUnLikeCard","watchAddReply"],"mappings":"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","sourcesContent":["import { takeEvery, put, call } from 'redux-saga/effects';\r\nimport axios from 'axios';\r\nimport {\r\n  FETCH_CARDS_START, FETCH_CARDS_START_STARTED,\r\n  FETCH_CARDS_SUCCESS_STARTED, FETCH_CARDS_FAIL_STARTED,\r\n  LIKE_CARD_REQUEST, UNLIKE_CARD_REQUEST, ADD_CARD_REPLY_REQUEST, DEL_CARD_REPLY_REQUEST,\r\n  LIKE_CARD_SUCCESS, LIKE_CARDS_FAIL,\r\n  UNLIKE_CARD_SUCCESS, UNLIKE_CARDS_FAIL,\r\n  ADD_CARD_REPLY_SUCCESS, ADD_CARD_REPLY_FAIL,\r\n  DEL_CARD_REPLY_SUCCESS, DEL_CARD_REPLY_FAIL,\r\n} from '../reducers/cardReducer';\r\n// import { SAGA_SIGN_IN } from '../reducers/sagaLoginReducer';\r\n\r\nconst fetchCard = function* fetchFollowing(action) {\r\n  try {\r\n    yield put({ type: FETCH_CARDS_START_STARTED });\r\n    const { data } = yield call([axios, 'get'], `http://127.0.0.1:3001/cards?userId=${action.payload}`, {\r\n      withCredentials: true,\r\n    });\r\n    yield put({ type: FETCH_CARDS_SUCCESS_STARTED, payload: data });\r\n  } catch (e) {\r\n    yield put({ type: FETCH_CARDS_FAIL_STARTED });\r\n  }\r\n};\r\nconst likeCard = function* LikeCard(action) {\r\n  try {\r\n    const likeData = {\r\n      boardId: action.payload.board_id,\r\n      userId: action.payload.username,\r\n    };\r\n    // console.log(likeData);\r\n    const { data } = yield call([axios, 'post'], 'http://127.0.0.1:3001/insertLike', likeData, {\r\n      withCredentials: true,\r\n    });\r\n    // console.log(data);\r\n    yield put({ type: LIKE_CARD_SUCCESS, payload: data });\r\n  } catch (e) {\r\n    yield put({ type: LIKE_CARDS_FAIL });\r\n  }\r\n};\r\n\r\nconst unLikeCard = function* LikeCard(action) {\r\n  try {\r\n    const unlikeData = {\r\n      // index: action.payload.index,\r\n      boardId: action.payload.board_id,\r\n      userId: action.payload.username,\r\n    };\r\n    // console.log(unlikeData);\r\n    const { data } = yield call([axios, 'post'], 'http://127.0.0.1:3001/deleteLike', unlikeData, {\r\n      withCredentials: true,\r\n    });\r\n    if (data === true) {\r\n      yield put({ type: UNLIKE_CARD_SUCCESS, payload: unlikeData });\r\n    }\r\n  } catch (e) {\r\n    yield put({ type: UNLIKE_CARDS_FAIL });\r\n  }\r\n};\r\nconst addReply = function* addReply(action) {\r\n  try {\r\n    const addReplyData = {\r\n      // index: action.payload.index,\r\n      boardId: action.payload.board_id,\r\n      userId: action.payload.username,\r\n      desc: action.payload.desc,\r\n    };\r\n    const { data } = yield call([axios, 'post'], 'http://127.0.0.1:3001/addReply', addReplyData, {\r\n      withCredentials: true,\r\n    });\r\n    console.log(data);\r\n    // yield put({ type: ADD_CARD_REPLY_SUCCESS });\r\n  } catch (e) {\r\n    // yield put({ type: ADD_CARD_REPLY_FAIL });\r\n  }\r\n};\r\n\r\nexport const watchFetchCard = function* watchFetchCard() {\r\n  yield takeEvery(FETCH_CARDS_START, fetchCard);\r\n};\r\nexport const watchLikeCard = function* watchLikeCard() {\r\n  yield takeEvery(LIKE_CARD_REQUEST, likeCard);\r\n};\r\nexport const watchUnLikeCard = function* watchUnLikeCard() {\r\n  yield takeEvery(UNLIKE_CARD_REQUEST, unLikeCard);\r\n};\r\nexport const watchAddReply = function* watchAddReply() {\r\n  yield takeEvery(ADD_CARD_REPLY_REQUEST, addReply);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}