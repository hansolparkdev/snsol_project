{"version":3,"file":"static/webpack/static\\development\\pages\\_app.js.14339832a0e03c44df88.hot-update.js","sources":["webpack:///./redux/sagas/card.js"],"sourcesContent":["import { takeEvery, put, call } from 'redux-saga/effects';\r\nimport axios from 'axios';\r\nimport {\r\n  FETCH_CARDS_START, FETCH_CARDS_START_STARTED,\r\n  FETCH_CARDS_SUCCESS_STARTED, FETCH_CARDS_FAIL_STARTED,\r\n  LIKE_CARD_REQUEST, UNLIKE_CARD_REQUEST, ADD_CARD_REPLY_REQUEST, DEL_CARD_REPLY_REQUEST,\r\n  LIKE_CARD_SUCCESS, LIKE_CARDS_FAIL,\r\n  UNLIKE_CARD_SUCCESS, UNLIKE_CARDS_FAIL,\r\n  ADD_CARD_REPLY_SUCCESS, ADD_CARD_REPLY_FAIL,\r\n  DEL_CARD_REPLY_SUCCESS, DEL_CARD_REPLY_FAIL,\r\n} from '../reducers/cardReducer';\r\n// import { SAGA_SIGN_IN } from '../reducers/sagaLoginReducer';\r\n\r\nconst fetchCard = function* fetchFollowing(action) {\r\n  try {\r\n    yield put({ type: FETCH_CARDS_START_STARTED });\r\n    const { data } = yield call([axios, 'get'], `http://127.0.0.1:3001/cards?userId=${action.payload}`, {\r\n      withCredentials: true,\r\n    });\r\n    yield put({ type: FETCH_CARDS_SUCCESS_STARTED, payload: data });\r\n  } catch (e) {\r\n    yield put({ type: FETCH_CARDS_FAIL_STARTED });\r\n  }\r\n};\r\nconst likeCard = function* LikeCard(action) {\r\n  try {\r\n    const likeData = {\r\n      boardId: action.payload.board_id,\r\n      userId: action.payload.username,\r\n    };\r\n    // console.log(likeData);\r\n    const { data } = yield call([axios, 'post'], 'http://127.0.0.1:3001/insertLike', likeData, {\r\n      withCredentials: true,\r\n    });\r\n    // console.log(data);\r\n    yield put({ type: LIKE_CARD_SUCCESS, payload: data });\r\n  } catch (e) {\r\n    yield put({ type: LIKE_CARDS_FAIL });\r\n  }\r\n};\r\n\r\nconst unLikeCard = function* LikeCard(action) {\r\n  try {\r\n    const unlikeData = {\r\n      // index: action.payload.index,\r\n      boardId: action.payload.board_id,\r\n      userId: action.payload.username,\r\n    };\r\n    // console.log(unlikeData);\r\n    const { data } = yield call([axios, 'post'], 'http://127.0.0.1:3001/deleteLike', unlikeData, {\r\n      withCredentials: true,\r\n    });\r\n    if (data === true) {\r\n      yield put({ type: UNLIKE_CARD_SUCCESS, payload: unlikeData });\r\n    }\r\n  } catch (e) {\r\n    yield put({ type: UNLIKE_CARDS_FAIL });\r\n  }\r\n};\r\nconst addReply = function* addReply(action) {\r\n  try {\r\n    console.log('aaa');\r\n    const addReplyData = {\r\n      // index: action.payload.index,\r\n      boardId: action.payload.board_id,\r\n      userId: action.payload.username,\r\n      desc: action.payload.desc,\r\n    };\r\n    const { data } = yield call([axios, 'post'], 'http://127.0.0.1:3001/addReply', addReplyData, {\r\n      withCredentials: true,\r\n    });\r\n\r\n    yield put({ type: ADD_CARD_REPLY_SUCCESS, payload: data });\r\n  } catch (e) {\r\n    yield put({ type: ADD_CARD_REPLY_FAIL });\r\n  }\r\n};\r\n\r\nexport const watchFetchCard = function* watchFetchCard() {\r\n  yield takeEvery(FETCH_CARDS_START, fetchCard);\r\n};\r\nexport const watchLikeCard = function* watchLikeCard() {\r\n  yield takeEvery(LIKE_CARD_REQUEST, likeCard);\r\n};\r\nexport const watchUnLikeCard = function* watchUnLikeCard() {\r\n  yield takeEvery(UNLIKE_CARD_REQUEST, unLikeCard);\r\n};\r\nexport const watchAddReply = function* watchAddReply() {\r\n  yield takeEvery(ADD_CARD_REPLY_REQUEST, addReply);\r\n};\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAUA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAHA;AAAA;AAGA;AACA;AADA;AACA;AAJA;AAAA;AAGA;AAHA;AAMA;AAAA;AAAA;AAAA;AACA;AAPA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAUA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAFA;AACA;AAHA;AAOA;AACA;AADA;AACA;AARA;AAAA;AAOA;AAPA;AAWA;AAAA;AAAA;AAAA;AACA;AAZA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAaA;AAAA;AAAA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAgBA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAHA;AACA;AAHA;AAQA;AACA;AADA;AACA;AATA;AAAA;AAQA;AACA;AATA;AAAA;AAAA;AAAA;AACA;AADA;AAYA;AAAA;AAAA;AAAA;AACA;AAbA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAeA;AAAA;AAAA;AACA;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAiBA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AAHA;AASA;AACA;AADA;AACA;AAVA;AAAA;AASA;AATA;AAaA;AAAA;AAAA;AAAA;AACA;AAdA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAeA;AAAA;AAAA;AACA;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAkBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}